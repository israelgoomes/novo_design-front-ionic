{"version":3,"sources":["../../src/pages/projetos/cadastro-projeto/cadastro-projeto.module.ts","../../src/app/models/projetoModel.ts","../../src/pages/projetos/cadastro-projeto/cadastro-projeto.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { CadastroProjetoPage } from './cadastro-projeto';\r\nimport {BrMaskerModule} from 'brmasker-ionic-3';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CadastroProjetoPage,\r\n  ],\r\n  imports: [\r\n    BrMaskerModule,\r\n    IonicPageModule.forChild(CadastroProjetoPage),\r\n  ],\r\n})\r\nexport class CadastroProjetoPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/projetos/cadastro-projeto/cadastro-projeto.module.ts","export class projetoModel {\r\n        _id: string\r\n       // nomeCliente: string;\r\n      //  tel: string;\r\n       // email: string;\r\n      //  endereco: string;\r\n     //   bairro: string;\r\n      //  cidade: string;\r\n        tituloProjeto: string;\r\n        descricaoProjeto: string;\r\n      //  cep: string;\r\n        preco: string;\r\n        foto: Array<ImageData>;\r\n        cliente: any;\r\n        data: string;\r\n}\r\n\r\n/* nomeCliente: {trim: true, required: true, type: String, index: true},\r\n    telefone: {trim:true, requried: true, type: String},\r\n    email: {type: String},\r\n    rua: {type: String, required: true},\r\n    bairro: {type: String, required: true},\r\n    cidade: {type: String, required: true, index: true},\r\n    tituloProjeto: {trim: true, required: true, index: true, type: String },\r\n    descricaoProjeto: {type: String, required: true},\r\n    cep: {type: String, required: true},\r\n    preco: {type: Number},\r\n    foto: {type: String}, */\n\n\n// WEBPACK FOOTER //\n// ./src/app/models/projetoModel.ts","import { Component, OnInit } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Platform, ActionSheetController, ModalController } from 'ionic-angular';\r\nimport { ProjetosProvider } from '../../../providers/projetos/projetos';\r\nimport { AlertProvider } from '../../../providers/alert/alert';\r\nimport { projetoModel } from '../../../app/models/projetoModel';\r\nimport { CameraProvider } from '../../../providers/camera/camera';\r\nimport { ClientesProvider } from '../../../providers/clientes/clientes';\r\nimport { clienteModel } from '../../../app/models/clienteModel';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-cadastro-projeto',\r\n  templateUrl: 'cadastro-projeto.html',\r\n})\r\nexport class CadastroProjetoPage implements OnInit{\r\n  foto = []\r\nprojeto: projetoModel;\r\nclientes: Array<clienteModel> = new Array<clienteModel>();\r\ncliente = []\r\n  constructor(\r\n    private navCtrl: NavController, \r\n    private navParams: NavParams,\r\n    private projetoSrvc: ProjetosProvider,\r\n    private alertSrvc: AlertProvider,\r\n    private platform: Platform,\r\n    private actionSheetCtrl: ActionSheetController,\r\n    private cameraSrvc: CameraProvider,\r\n    private clientesSrvc: ClientesProvider,\r\n    private modalCtrl: ModalController\r\n    \r\n    ) { \r\n      \r\n      let projeto = this.navParams.get('_projeto');\r\n      if(projeto){\r\n        this.projeto = <projetoModel>projeto\r\n        if(!this.projeto)\r\n        this.projeto.cliente = projeto.cliente._id;\r\n      }else {\r\n      //  this.projeto.cliente = this.projeto._id\r\n        this.projeto = new projetoModel();\r\n      }\r\n      this.loadCliente();\r\n  }\r\n\r\nngOnInit():void {\r\n \r\n if(this.projeto.tituloProjeto == undefined){\r\n    //this.cliente.nome = this.projeto.nome\r\n  \r\n  }\r\n}\r\n\r\n\r\nopenClientOption(){\r\n  const modal = this.modalCtrl.create(\r\n    'ModalClientesPage' , {_cliente: this.clientes});\r\n    modal.present();\r\n\r\n    modal.onDidDismiss(data => {\r\n      console.log('Retorno do Modal',data.cliente);\r\n      this.cliente = data.cliente;\r\n      this.projeto.cliente = data.cliente._id;\r\n      //this.projeto = data.cliente;\r\n      console.log('Verificando o valor de projeto', this.projeto.cliente)\r\n    })\r\n}\r\n\r\nasync loadCliente(): Promise<void>{\r\n  try {\r\n    let result = await this.clientesSrvc.get();\r\n    if(result.success){\r\n      this.clientes = <Array<clienteModel>>result.data;\r\n    }  \r\n    console.log('Clientes', this.clientes)\r\n  } catch (error) {\r\n    console.log(\"Erro na tela projetos\", error);\r\n  }\r\n  \r\n}\r\n\r\nasync salvar(): Promise<void> {\r\n  this.projeto.foto = this.foto;\r\n\r\n  let sucesso = false;\r\n  if(!this.projeto._id){\r\n    let cadastroResult = await this.projetoSrvc.post(this.projeto)\r\n    sucesso = cadastroResult.success;\r\n  }\r\n  if(sucesso){\r\n    this.alertSrvc.toast('Projeto salvo com sucesso', 'bottom');\r\n    this.navCtrl.setRoot('ProjetosPage');\r\n  }\r\n}\r\n\r\ngetPictureOptions(): void {\r\n  //actionSheet serve para aparecer as opções, se a foto será escolhida na galeria ou tirada na hora.\r\n  let actionSheet = this.actionSheetCtrl.create({\r\n    title: 'Adicionar foto',\r\n    buttons: [\r\n      { text: 'Tirar foto', handler: () => {\r\n        //escolhendo a opção de tirar foto no cameraprovider que foi criado, e assumindo o valor da photo para o projeto.foto\r\n        this.cameraSrvc.takePicture((photo) =>{\r\n          this.foto.push(photo);\r\n          this.projeto.foto = this.foto;\r\n\r\n        })\r\n\r\n      }, \r\n      icon: this.platform.is('ios') ? null : 'camera' },\r\n//------------------------ Opção pegar da galeria ------------\r\n      { text: 'Pegar galeria', handler: () =>{\r\n        \r\n        this.cameraSrvc.getPictureFromGalery(photo =>{\r\n          this.foto.push(photo);\r\n          this.projeto.foto = this.foto;\r\n\r\n        } )\r\n\r\n      }, icon: this.platform.is('ios') ? null : 'images'},\r\n      //o role 'destructive' deixa o botao vermelho\r\n      {text: 'Cancelar', role: 'destructive', \r\n      icon: this.platform.is('ios') ? null : 'close'\r\n    ,handler: () => {\r\n        //cancela a ação\r\n      }, }\r\n    ]\r\n  });\r\n  actionSheet.present();\r\n}\r\n\r\n  ionViewDidLoad() {\r\n    console.log('Todas fotos', this.projeto.foto)\r\n    console.log('ionViewDidLoad CadastroProjetoPage');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/projetos/cadastro-projeto/cadastro-projeto.ts"],"sourceRoot":""}